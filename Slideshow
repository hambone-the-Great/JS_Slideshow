
class Slideshow 
{       
    #container = null
    #children = null; 
    #startingSlide = 0; 
    #fadeDuration = 15;
    #slidePauseDuration = 5000;

    get Container(){
        return this.#container;
    } 

    set Container(v){
        this.#container = v; 
    }

    get Children() {
        return this.#children; 
    }

    set Children(v){
        this.#children = v; 
    }

    get StartingSlide(){
        return this.#startingSlide;
    }

    set StartingSlide(v) {
        this.#startingSlide = ((v > -1) && (v < this.#children.length)) ? v : 0;
    }

    get FadeDuration() {
        return this.#fadeDuration; 
    }

    set FadeDuration(v){
        this.#fadeDuration = v;
    }

    get SlidePauseDuration(){
        return this.#slidePauseDuration;
    }

    set SlidePauseDuration(v){
        this.#slidePauseDuration = v; 
    }

   
    constructor(id){
        let el = document.getElementById(id); 
        if (!el) {            
            el = document.createElement("div"); 
            el.id = id;     
            document.appendChild(div);         
        }
        
        this.#container = el; 
        this.#children = el.children; 
    }

    /**
     * 
     * @param {Slide} slide 
     */
    AddSlide(slide){        
        this.Container.appendChild(slide.Container);      
        slide.Container.setAttribute("style", 
            "background-image:url('" + slide.ImageUrl + "'); " + 
            "background-position:" + slide.ImagePosition + ";" + 
            "background-size:" + slide.ImageSize + ";"
        );
    }
    
    Start(){        
        this.FadeIn(this, 0, this.#startingSlide, this.#children, this.#slidePauseDuration);
    }

    FadeIn(slideshow, i, j, slides, pauseDuration){
                
        var opacity = i / 100; 
        var slide = slides[j];
        var duration = slideshow.#fadeDuration;

        if (i >= 100){           
            
            window.setTimeout(function(){
                slideshow.FadeOut(slideshow, i, j, slides, pauseDuration);                            
                return;        
            }, pauseDuration);
            return ;
        }
        
        slide.classList.add("show");
        slide.style.opacity = opacity;
        
        window.setTimeout(function(){
            
            i++;
            slideshow.FadeIn(slideshow, i, j, slides, pauseDuration); 

        }, duration);


    }
    
    FadeOut(slideshow, i, j, slides, pauseDuration){
                
        var opacity = i / 100; 
        var slide = slides[j];
        var duration = slideshow.#fadeDuration;

        if (i <= 0) 
        {        
            slide.classList.remove("show");            
            j++;
            j = slides.length > j ? j : 0; 
            slideshow.FadeIn(slideshow, i, j, slides, pauseDuration);  
            return;                   
        }
        
        slide.style.opacity = opacity;
        
        window.setTimeout(function(){                
            i--;
            slideshow.FadeOut(slideshow, i, j, slides, pauseDuration); 
        }, duration);
    }
}

class Slide {

    #container = null;
    #imageUrl = ""; 
    #textContent = "";
    #cssClass = "slide";    
    #imagePosition = "center center"; 
    #imageSize = "cover"; 

    get Container() { return this.#container; }
    set Container(v) { this.#container = v; }
    get ImageUrl() { return this.#imageUrl; }
    set ImageUrl(v) { this.#imageUrl = v; }
    get TextContent() { return this.#textContent; }
    set TextContent(v) { this.#textContent = v; }
    get CssClass() { return this.#cssClass; }
    set CssClass(v) { this.#cssClass = v; }
    get ImagePosition() { return this.#imagePosition; }
    set ImagePosition(v) { this.#imagePosition = v; }
    get ImageSize() { return this.#imageSize; }
    set ImageSize(v) { this.#imageSize = v; } 

    constructor(url, content, css, pos, size) {        
        
        let slide = document.createElement("div"); 

        if (content) {
            this.#textContent = content; 
            let span = document.createElement("span"); 
            span.innerHTML = content; 
            slide.appendChild(span); 
        }  

        if (pos) {
            this.#imagePosition = pos;            
        }

        if (size) {
            this.#imageSize = size; 
        }

        if (css) {            
                        
            this.#cssClass = css; 

            let classes = css.split(' '); 

            for (var key in classes)
            {
                slide.classList.add(classes[key]);     
            }
        }     
        
        if (url) { 
            this.ImageUrl = url;                                     
        }

        this.#container = slide;         
    }
    
}
